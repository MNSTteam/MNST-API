# MNST-API

1) /get_stakes   - позволяет получить все стейки по любым из трех параметров или их комбинациям

              pub_key - выведет все стейки в конкретной мастерноде
              http://195.201.244.41:8841/get_stakes?pub_key=Mp46d3d6afe0084fcf530b03d1f4427e516a1cb4ec542640bcbc84c2c4b4f53c13

              coin - покажет все стейки в определенной монете
              http://195.201.244.41:8841/get_stakes?coin=MNST

              address - найдет все стейки определенного кошелька
              http://195.201.244.41:8841/get_stakes?address=Mx6a2a8335129e499fcd006da9ef1b9896b2c101fd

             pub_key=_&coin=_&address=_ - параметры можно комбинировать любым удобным способом, к примеру получить список стейков MonsterNode в монете TAXFREE или вообще не указать ни одного параметра и получить список всех стейков во всех нодах, но учитывайте что крайний вариант весьма ресурсоемкий и зачастую приемлем только при локальном использовании.
             http://195.201.244.41:8841/get_stakes?pub_key=Mp46d3d6afe0084fcf530b03d1f4427e516a1cb4ec542640bcbc84c2c4b4f53c13&coin=TAXFREE
             http://195.201.244.41:8841/get_stakes

2) /total_slashed - выдаст bip_value всех монет сожженных в сети. Просили - сделал.
             http://195.201.244.41:8841/total_slashed

3) /height_by_time - один из моих любимых методов позволяющий определить номер блока какой блок был сутки или неделю назад, или 30 апреля в 5 часов 44 минуты 22 секунды. Метод высвобождает весьма приличный объем ресурсов необходимых для хранения такого бесполезного параметра как время создания блока в своей базе данных и позволяет настроить индекс по номеру блока. Очень полезен для рейтингов и прочих сервисов, которым необходимо сравнение данных к примеру текущих и сутки назад.
            http://195.201.244.41:8841/height_by_time?query=day
            http://195.201.244.41:8841/height_by_time?query=week
            http://195.201.244.41:8841/height_by_time?query=2020-04-30T05:44:22Z

4) /frozzed - еще один метод о котором меня просили многие разработчики. Без дополнительных параметров выдает все "замороженные" средства - unbounds,проверяет есть ли анбоунды по конкретному кошельку или монете.
            http://195.201.244.41:8841/frozzed
            http://195.201.244.41:8841/frozzed?address=Mxaa1eb05ade73bc78ad4828f8c78f84c3af4ec1ea
            http://195.201.244.41:8841/frozzed?coin=MNST

5) /calc_tx_commission - альтернативный метод позволяющий определить размер комиссии по еще не сформированной транзакции. 
http://195.201.244.41:8841/calc_tx_commission?gascoin=TAXFREE&txtype=MultiSend&payload=%7B%D0%9F%D1%80%D0%BE%D1%81%D1%82%D0%BE%20%D1%82%D0%B0%D0%BA%20%D1%87%D1%82%D0%BE%20%D1%82%D0%BE%20%D0%BD%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BB%20%D0%B8%20%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B5%D1%81%D0%BD%D0%BE%20%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE%20%D0%BC%D0%BD%D0%B5%20%D0%B1%D1%83%D0%B4%D0%B5%D1%82%20%D1%8D%D1%82%D0%BE%20%D1%81%D1%82%D0%BE%D0%B8%D1%82%D1%8C%7D&mtxs=2

     Метод весьма сложный, поэтому опишу его параметры чуть подробнее:

                  gascoin - указывает в какой монете считать комиссию за транзакцию

                  payload - так же влияет на стоимость, потому нужно указать в {...}

                  txtype - типа транзакции(SendTx, ConvertTx, DeclareCandidacyTx, DelegateTx, UnbondTx, ToggleCandidateStatus, EditCandidate, RedeemCheckTx, CreateMultisig, MultiSend) 

                  mtxs - данный параметр необходим только для указания количества отправок внутри мультисенд перевода, во всех остальных случаях его можно не указывать.

6) /calc_tx_free_coin - аналогично предыдущему методу, но дополнительно выдает информацию о том сколько монет остается свободных для перевода. Думаю приятно сделать перевод монет MNST оплатив комиссию ей же и ни оставить ни одного pip-MNSTна кошельке.
                  http://195.201.244.41:8841/calc_tx_free_coin?gascoin=MNST&txtype=SendTx&gascoinamount=100000000000000000

7) /address_balance - подробный баланс кошелька с учетом количества и стоимости всех имеющихся и делегированных монет во все ноды (может использоваться как с параметром height=, так и без)
                  http://195.201.244.41:8841/address_balance?address=Mxa64c6e11840b2cdc6a8320342e07b10f69628885

Идеальный метод для сервисов кошельков. Выдает информацию быстро и сразу рассчитывает стоимость каждой кастомной монеты в bip и общую стоимость всех монет на кошельке с учетом делегированных.

Просто идеально. Один запрос и сразу вся нужная информация.

8) /candidate_info - метод позволяющий получить подробную информацию о конкретном кандидате, к примеру MonsterNode. 
http://195.201.244.41:8841/candidate_info?pub_key=Mp46d3d6afe0084fcf530b03d1f4427e516a1cb4ec542640bcbc84c2c4b4f53c13

От предыдущей версии отличается тем что был оптимизирован код и произведено деление кандидатов на 3 типа: 

        a) ноды не отправившие команду set candidat on, отключеные через set candidat off или выпавшие из валидирования по причине падения  (status = 1) в моей терминологии это Кандидат

        б) ноды готовые валидировать, но не проходящие в валидаторы по стейку  (status=2), я называю их Претендент

        в) Активные валидаторы (status = 3), ну валидатор и есть Валидатор.

Напомню что в базовой версии candidate в параметре status только 2 значения.

9) /candidates_info - метод аналогичный предыдущему, но выводит ни одного, а сразу всех кандидатов, валидаторов и претендентов. А можно вывести к примеру только тех кто является валидатором или тех кто готов валидировать, но ему не хватает стейка, для этого можно указать status.
                http://195.201.244.41:8841/candidates_info
                http://195.201.244.41:8841/candidates_info?status=3
                http://195.201.244.41:8841/candidates_info?status=2

10) /nosign - удобен для сбора данных о том кто не подписал конкретный блок. Способ легче и быстрее чем запрашивать всю информацию о блоке и обрабатывать ее. Дополнительно выдает информацию о том кто являлся пропоузером блока когда кто то пропустил.
                http://195.201.244.41:8841/nosign?height=1419481

11) /txs_from_block - аналогично предыдущему методу выдает только нужное, что облегчает запрос относительно /block и ускоряет получение данных. Незначительно, но все же на 100к запросов экономия времени составит порядка 35%. Мелочи заметны в тираже.
                http://195.201.244.41:8841/txs_from_block?height=1000000
12) /find_events - поиск eventов по кошельку или PublicKey валидатора, или по тому и другому в конкретном блоке

Мультизапрос удобен тем что можно выводить и парсить не все events сети на конкретный блок, а только те которые необходимы, например по конкретному кошельку или нескольким кошелькам или валидатору, а можно и в комбинированном варианте.
                http://195.201.244.41:8841/find_events?height=1425960&find=[%22Mxa64c6e11840b2cdc6a8320342e07b10f69628885%22,%22Mp46d3d6afe0084fcf530b03d1f4427e516a1cb4ec542640bcbc84c2c4b4f53c13%22]
Фишка запроса что при разумном использовании он быстрее родителя /events раз в 50-100, т.к. обрабатывает и выводит только НЕОБХОДИМЫЕ данные.

13) /grouped_events - Информация по распределению наград с валидирования по конкретному блоку в разрезе валидатора и типов ревардов
                http://195.201.244.41:8841/grouped_events?height=1425960
Один из самый странных запросов, но может быть применим для ряда сервисов для более быстрого и удобного парсинга сгруппированных данных по ревардам. Шустрее родителя раз в 200 за счет того что не выводит слайсы по каждому реварду
